{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from 'axios';\nimport ValidateOrderComponent from '@/components/shop/ValidateOrderComponent';\nimport $storeUser from '@/store/user';\nexport default {\n  name: 'OrdersView',\n  components: {\n    ValidateOrderComponent\n  },\n  data: () => ({\n    user: $storeUser.state.user,\n    show: false,\n    orders: []\n  }),\n\n  mounted() {\n    axios.get('http://localhost:4400/api/v1/orders/').then(response => this.orders = response.data).catch(error => console.log(error));\n  }\n\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+FA;AACA;AACA;AAEA;EACAA,kBADA;EAEAC;IACAC;EADA,CAFA;EAKAC;IACAC,2BADA;IAEAC,WAFA;IAGAC;EAHA,EALA;;EAUAC;IACAC,kDACAC,IADA,CACAC,uCADA,EAEAC,KAFA,CAEAC,2BAFA;EAGA;;AAdA","names":["name","components","ValidateOrderComponent","data","user","show","orders","mounted","axios","then","response","catch","error"],"sourceRoot":"src/views/shop","sources":["OrdersView.vue"],"sourcesContent":["<template>\n  <div id=\"orders-view\" class=\"mt-3 mb-8\">\n    <v-container class=\"pr-0 pl-0\">\n      <h2>Mes commandes</h2>\n      <v-row class=\"mt-2\">\n        <v-col>\n          <v-card outlined v-for=\"order in orders.filter(order => order.customerId === user.id || order.restaurant.restaurantOwnerId)\" :key=\"order.id\" class=\"mx-auto mb-5\">\n            <v-row class=\"mt-1 mb-1\">\n              <v-col sm=\"3\">\n                <v-img class=\"ml-4\" :src=\"order.restaurant.image\" :alt=\"order.name\" height=\"100%\"/>\n              </v-col>\n              <v-col sm=\"9\">\n                <div class=\"restaurant-theme\">\n                  <v-card-title>\n                    {{ order.restaurant.name }}\n                  </v-card-title>\n                  <div class=\"categories\">\n                    <v-card-text v-for=\"category in order.restaurant.categories\" :key=\"category\">\n                      {{ category }}\n                    </v-card-text>\n                  </div>\n                </div>\n                <div class=\"restaurant-infos\">\n                  <v-card-subtitle>{{ order.location.city }} ({{ order.location.zipCode }}), {{ order.location.address }}</v-card-subtitle>\n                  <div class=\"opening-hours\">\n                    <v-card-text>{{ order.restaurant.openingHours }}</v-card-text>\n                  </div>\n                </div>\n                <v-card-actions>\n                  <v-btn color=\"primary\" text @click=\"show = !show\">\n                    Détails de la commande\n                    <v-icon color=\"primary\">{{ show ? 'mdi-chevron-up' : 'mdi-chevron-down' }}</v-icon>\n                  </v-btn>\n                  <v-spacer></v-spacer>\n                  <v-btn v-if=\"user.roleId === 2 && order.orderState === 'En attente de préparation'\" color=\"secondary\" text class=\"mr-4\">\n                    <ValidateOrderComponent :order=\"order\"/>\n                  </v-btn>\n                  <v-btn v-if=\"user.roleId === 1 && order.orderState === 'En attente de préparation'\" text class=\"mr-4\">\n                    {{ order.orderState }}\n                    <v-icon class=\"ml-1\">mdi-alarm</v-icon>\n                  </v-btn>\n                  <v-btn v-if=\"order.orderState === 'En attente de livraison'\" color=\"secondary\" text class=\"mr-4\">\n                    {{ order.orderState }}\n                    <v-icon class=\"ml-1\">mdi-alarm</v-icon>\n                  </v-btn>\n                  <v-btn v-if=\"order.orderState === 'Livrée'\" color=\"primary\" text class=\"mr-4\">\n                    {{ order.orderState }}\n                    <v-icon class=\"ml-1\">mdi-check-circle</v-icon>\n                  </v-btn>\n                </v-card-actions>\n                <v-expand-transition>\n                  <div v-show=\"show\">\n                    <v-divider></v-divider>\n                    <v-simple-table>\n                      <template v-slot:default>\n                        <thead>\n                        <tr>\n                          <th class=\"text-left\">Nom</th>\n                          <th class=\"text-center\">Quantité</th>\n                          <th class=\"text-center\">Prix unitaire</th>\n                          <th class=\"text-center\">Prix total</th>\n                        </tr>\n                        </thead>\n                        <tbody>\n                          <tr v-for=\"item in order.menus.concat(order.products)\" :key=\"item.item.id\">\n                            <td class=\"text-left\">{{ item.item.name }}</td>\n                            <td class=\"text-center\">{{ item.quantity }}</td>\n                            <td class=\"text-center\">{{ item.item.price }} €</td>\n                            <td class=\"text-center\">{{ item.quantity * item.item.price }} €</td>\n                          </tr>\n                          <tr>\n                            <td>Prix de la livraison</td>\n                            <td colspan=\"2\"></td>\n                            <td class=\"text-center\">{{ order.prices.deliveryPrice }} €</td>\n                          </tr>\n                          <tr>\n                            <td class=\"font-weight-bold\">Total</td>\n                            <td colspan=\"2\"></td>\n                            <td class=\"font-weight-bold text-center\">{{ order.prices.totalPrice }} €</td>\n                          </tr>\n                        </tbody>\n                      </template>\n                    </v-simple-table>\n                  </div>\n                </v-expand-transition>\n              </v-col>\n            </v-row>\n          </v-card>\n        </v-col>\n      </v-row>\n    </v-container>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport ValidateOrderComponent from '@/components/shop/ValidateOrderComponent'\nimport $storeUser from '@/store/user'\n\nexport default {\n  name: 'OrdersView',\n  components: {\n    ValidateOrderComponent\n  },\n  data: () => ({\n    user: $storeUser.state.user,\n    show: false,\n    orders: []\n  }),\n  mounted () {\n    axios.get('http://localhost:4400/api/v1/orders/')\n      .then(response => (this.orders = response.data))\n      .catch(error => console.log(error))\n  }\n}\n</script>\n\n<style scoped>\n#orders-view .restaurant-theme, #orders-view .restaurant-infos {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n#orders-view .restaurant-theme, #orders-view .restaurant-infos {\n  margin-right: 20px;\n}\n#orders-view .categories {\n  display: flex;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}