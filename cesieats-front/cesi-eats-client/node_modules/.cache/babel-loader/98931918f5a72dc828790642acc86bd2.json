{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from 'axios';\nimport VueApexCharts from 'vue-apexcharts';\nexport default {\n  name: 'StatisticsView',\n  components: {\n    VueApexCharts\n  },\n  data: () => ({\n    amount: {\n      users: 0,\n      restaurants: 0,\n      menus: 0,\n      products: 0,\n      orders: 0,\n      deliveries: 0\n    },\n    statistics: [{\n      title: 'Total des utilisateurs',\n      color: 'primary lighten-2'\n    }, {\n      title: 'Total des restaurants',\n      color: 'primary lighten-1'\n    }, {\n      title: 'Total des menus',\n      color: 'primary'\n    }, {\n      title: 'Total des produits',\n      color: 'primary darken-1'\n    }, {\n      title: 'Total des commandes',\n      color: 'primary darken-2'\n    }, {\n      title: 'Total des livraisons',\n      color: 'primary darken-3'\n    }],\n    chartOptions: {\n      chart: {\n        width: '100%',\n        type: 'donut'\n      },\n      labels: ['Clients', 'Restaurateurs', 'Livreurs', 'Service commercial', 'Service technique', 'Développeur externe'],\n      colors: ['#85e783', '#69cb69', '#4caf4f', '#2d9437', '#00791e', '#006000'],\n      fill: {\n        colors: ['#85e783', '#69cb69', '#4caf4f', '#2d9437', '#00791e', '#006000']\n      }\n    },\n    orders: [],\n    headers: [{\n      text: 'Restaurant',\n      value: 'restaurant.name'\n    }, {\n      text: 'Ville',\n      value: 'location.city'\n    }, {\n      text: 'Code postal',\n      value: 'location.zipCode'\n    }, {\n      text: 'État',\n      value: 'orderState'\n    }, {\n      text: 'Date',\n      value: 'date',\n      dataType: 'Date'\n    }]\n  }),\n\n  mounted() {\n    axios.get('http://localhost:4100/api/v1/users/stats').then(response => this.amount.users = response.data).catch(error => console.log(error));\n    axios.get('http://localhost:4200/api/v1/restaurants/stats').then(response => this.amount.restaurants = response.data).catch(error => console.log(error));\n    axios.get('http://localhost:4600/api/v1/menus/stats').then(response => this.amount.menus = response.data).catch(error => console.log(error));\n    axios.get('http://localhost:4500/api/v1/products/stats').then(response => this.amount.products = response.data).catch(error => console.log(error));\n    axios.get('http://localhost:4400/api/v1/orders/stats').then(response => this.amount.orders = response.data).catch(error => console.log(error));\n    axios.get('http://localhost:4600/api/v1/deliveries/stats').then(response => this.amount.deliveries = response.data).catch(error => console.log(error));\n    axios.get('http://localhost:4400/api/v1/orders/').then(response => this.orders = response.data).catch(error => console.log(error));\n  }\n\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwFA;AACA;AAEA;EACAA,sBADA;EAEAC;IACAC;EADA,CAFA;EAKAC;IACAC;MACAC,QADA;MAEAC,cAFA;MAGAC,QAHA;MAIAC,WAJA;MAKAC,SALA;MAMAC;IANA,CADA;IASAC,aACA;MAAAC;MAAAC;IAAA,CADA,EAEA;MAAAD;MAAAC;IAAA,CAFA,EAGA;MAAAD;MAAAC;IAAA,CAHA,EAIA;MAAAD;MAAAC;IAAA,CAJA,EAKA;MAAAD;MAAAC;IAAA,CALA,EAMA;MAAAD;MAAAC;IAAA,CANA,CATA;IAiBAC;MACAC;QAAAC;QAAAC;MAAA,CADA;MAEAC,kHAFA;MAGAC,0EAHA;MAIAC;QACAD;MADA;IAJA,CAjBA;IAyBAV,UAzBA;IA0BAY,UACA;MAAAC;MAAAC;IAAA,CADA,EAEA;MAAAD;MAAAC;IAAA,CAFA,EAGA;MAAAD;MAAAC;IAAA,CAHA,EAIA;MAAAD;MAAAC;IAAA,CAJA,EAKA;MAAAD;MAAAC;MAAAC;IAAA,CALA;EA1BA,EALA;;EAuCAC;IACAC,sDACAC,IADA,CACAC,6CADA,EAEAC,KAFA,CAEAC,2BAFA;IAGAJ,4DACAC,IADA,CACAC,mDADA,EAEAC,KAFA,CAEAC,2BAFA;IAGAJ,sDACAC,IADA,CACAC,6CADA,EAEAC,KAFA,CAEAC,2BAFA;IAGAJ,yDACAC,IADA,CACAC,gDADA,EAEAC,KAFA,CAEAC,2BAFA;IAGAJ,uDACAC,IADA,CACAC,8CADA,EAEAC,KAFA,CAEAC,2BAFA;IAGAJ,2DACAC,IADA,CACAC,kDADA,EAEAC,KAFA,CAEAC,2BAFA;IAIAJ,kDACAC,IADA,CACAC,uCADA,EAEAC,KAFA,CAEAC,2BAFA;EAGA;;AA9DA","names":["name","components","VueApexCharts","data","amount","users","restaurants","menus","products","orders","deliveries","statistics","title","color","chartOptions","chart","width","type","labels","colors","fill","headers","text","value","dataType","mounted","axios","then","response","catch","error"],"sourceRoot":"src/views/commercial","sources":["StatisticsView.vue"],"sourcesContent":["<template>\n  <div class=\"dashboard\">\n    <v-container>\n      <v-subheader class=\"py-0 d-flex justify-space-between rounded-lg\">\n        <h2>Tableau de bord</h2>\n      </v-subheader>\n      <br>\n      <v-row>\n        <v-col lg=\"6\" cols=\"12\">\n          <v-row>\n            <v-col sm=\"6\" cols=\"12\" v-for=\"(stat, idx) in statistics\" :key=\"idx\">\n              <v-card elevation=\"2\" class=\"rounded-lg\">\n                <v-card-text class=\"d-flex justify-space-between align-center\">\n                  <div>\n                    <strong>{{ stat.title }}</strong> <br>\n                    <span>Depuis notre création</span>\n                  </div>\n                  <v-avatar size=\"60\" :color=\"stat.color\" style=\"border: 3px solid #444\">\n                    <span v-if=\"idx === 0\" style=\"color: white; font-size: 16px; font-weight: bold;\">{{ amount.users.usersCount }}</span>\n                    <span v-if=\"idx === 1\" style=\"color: white; font-size: 16px; font-weight: bold;\">{{ amount.restaurants.restaurantsCount }}</span>\n                    <span v-if=\"idx === 2\" style=\"color: white; font-size: 16px; font-weight: bold;\">{{ amount.menus.menusCount }}</span>\n                    <span v-if=\"idx === 3\" style=\"color: white; font-size: 16px; font-weight: bold;\">{{ amount.products.productsCount }}</span>\n                    <span v-if=\"idx === 4\" style=\"color: white; font-size: 16px; font-weight: bold;\">{{ amount.orders.ordersCount }}</span>\n                    <span v-if=\"idx === 5\" style=\"color: white; font-size: 16px; font-weight: bold;\">{{ amount.deliveries.deliveriesCount }}</span>\n                  </v-avatar>\n                </v-card-text>\n              </v-card>\n            </v-col>\n          </v-row>\n        </v-col>\n        <v-col lg=\"6\" cols=\"12\">\n          <div id=\"chart\">\n            <h3>Répartition des rôles utilisateurs</h3>\n            <VueApexCharts type=\"donut\" :options=\"chartOptions\" :series=\"[\n              amount.users.customersCount,\n              amount.users.restaurantOwnersCount,\n              amount.users.deliveryMansCount,\n              amount.users.technicalDepartmentCount,\n              amount.users.comercialDepartmentsCount,\n              amount.users.externalsCount\n            ]\"></VueApexCharts>\n          </div>\n        </v-col>\n\n        <v-col md=\"4\" cols=\"12\">\n          <v-card>\n            <v-card-title>Activités</v-card-title>\n            <v-card-text class=\"py-0\">\n              <v-timeline align-top dense>\n                <v-timeline-item small v-for=\"od in this.orders.slice(0, 5)\" :key=\"od\" :color=\"od.orderState === 'Livrée' ? '#4caf4f' : '#85e783'\">\n                  <strong>Depuis : {{ new Date((Date.now() - od.date) - 3600000).toLocaleTimeString() }}</strong>\n                  <div class=\"text-caption\">\n                    <span>Une commande </span>\n\n                    <span v-if=\"od.orderState === 'En attente de préparation'\">\n                      est en attente de préparation.\n                    </span>\n                    <span v-if=\"od.orderState === 'En attente de livraison' || od.deliveryState === 'En attente de livraison'\">\n                      est en attente de livraison.\n                    </span>\n                    <span v-if=\"od.orderState === 'En cours de livraison' || od.deliveryState === 'En cours de livraison'\">\n                      est en cours de livraison.\n                    </span>\n                    <span v-if=\"od.orderState === 'Livrée' || od.deliveryState === 'Livrée'\">\n                      vient d'être livrée !\n                    </span>\n                  </div>\n                </v-timeline-item>\n              </v-timeline>\n            </v-card-text>\n          </v-card>\n        </v-col>\n        <v-col md=\"8\" cols=\"12\">\n          <v-card>\n            <v-data-table caption=\"Liste des dernières commandes\" class=\"elevation-1\"\n              :headers=\"this.headers\" :items=\"this.orders\" :items-per-page=\"5\">\n              <template v-slot:[`item.date`]=\"{ item }\">\n                <span>{{ new Date(item.date).toLocaleString() }}</span>\n              </template>\n            </v-data-table>\n          </v-card>\n        </v-col>\n      </v-row>\n    </v-container>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport VueApexCharts from 'vue-apexcharts'\n\nexport default {\n  name: 'StatisticsView',\n  components: {\n    VueApexCharts\n  },\n  data: () => ({\n    amount: {\n      users: 0,\n      restaurants: 0,\n      menus: 0,\n      products: 0,\n      orders: 0,\n      deliveries: 0\n    },\n    statistics: [\n      { title: 'Total des utilisateurs', color: 'primary lighten-2' },\n      { title: 'Total des restaurants', color: 'primary lighten-1' },\n      { title: 'Total des menus', color: 'primary' },\n      { title: 'Total des produits', color: 'primary darken-1' },\n      { title: 'Total des commandes', color: 'primary darken-2' },\n      { title: 'Total des livraisons', color: 'primary darken-3' }\n    ],\n    chartOptions: {\n      chart: { width: '100%', type: 'donut' },\n      labels: ['Clients', 'Restaurateurs', 'Livreurs', 'Service commercial', 'Service technique', 'Développeur externe'],\n      colors: ['#85e783', '#69cb69', '#4caf4f', '#2d9437', '#00791e', '#006000'],\n      fill: {\n        colors: ['#85e783', '#69cb69', '#4caf4f', '#2d9437', '#00791e', '#006000']\n      }\n    },\n    orders: [],\n    headers: [\n      { text: 'Restaurant', value: 'restaurant.name' },\n      { text: 'Ville', value: 'location.city' },\n      { text: 'Code postal', value: 'location.zipCode' },\n      { text: 'État', value: 'orderState' },\n      { text: 'Date', value: 'date', dataType: 'Date' }\n    ]\n  }),\n  mounted () {\n    axios.get('http://localhost:4100/api/v1/users/stats')\n      .then(response => (this.amount.users = response.data))\n      .catch(error => console.log(error))\n    axios.get('http://localhost:4200/api/v1/restaurants/stats')\n      .then(response => (this.amount.restaurants = response.data))\n      .catch(error => console.log(error))\n    axios.get('http://localhost:4600/api/v1/menus/stats')\n      .then(response => (this.amount.menus = response.data))\n      .catch(error => console.log(error))\n    axios.get('http://localhost:4500/api/v1/products/stats')\n      .then(response => (this.amount.products = response.data))\n      .catch(error => console.log(error))\n    axios.get('http://localhost:4400/api/v1/orders/stats')\n      .then(response => (this.amount.orders = response.data))\n      .catch(error => console.log(error))\n    axios.get('http://localhost:4600/api/v1/deliveries/stats')\n      .then(response => (this.amount.deliveries = response.data))\n      .catch(error => console.log(error))\n\n    axios.get('http://localhost:4400/api/v1/orders/')\n      .then(response => (this.orders = response.data))\n      .catch(error => console.log(error))\n  }\n}\n</script>\n\n<style scoped>\n.overlap-icon {\n  position: absolute;\n  top: -33px;\n  text-align: center;\n  padding-top: 12px;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}