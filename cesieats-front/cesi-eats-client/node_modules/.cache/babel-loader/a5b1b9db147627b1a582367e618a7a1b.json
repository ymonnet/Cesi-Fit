{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from 'axios';\nexport default {\n  name: 'ValidateDeliveryComponent',\n  props: {\n    delivery: {},\n    action: String\n  },\n  data: () => ({\n    newDeliveryMan: {},\n    validDelivery: false,\n    validateDeliveryDialog: false,\n    show1: true\n  }),\n  methods: {\n    validateDelivery() {\n      if (this.action === 'Accepter') {\n        axios.patch('http://localhost:4300/api/v1/deliveries/' + this.delivery._id, {\n          deliveryState: 'En cours de livraison'\n        }).catch(error => console.log(error));\n        axios.patch('http://localhost:4400/api/v1/orders/' + this.delivery.order._id, {\n          orderState: 'En cours de livraison'\n        }).catch(error => console.log(error));\n      }\n\n      if (this.action === 'Refuser') {\n        axios.patch('http://localhost:4300/api/v1/deliveries/' + this.delivery._id, {\n          deliveryManId: this.newDeliveryMan.id\n        }).catch(error => console.log(error));\n      }\n\n      if (this.action === 'Confirmer') {\n        axios.patch('http://localhost:4300/api/v1/deliveries/' + this.delivery._id, {\n          deliveryState: 'Livrée'\n        }).catch(error => console.log(error));\n        axios.patch('http://localhost:4400/api/v1/orders/' + this.delivery.order._id, {\n          orderState: 'Livrée'\n        }).catch(error => console.log(error));\n      }\n\n      location.reload();\n    },\n\n    cancelButtonClick() {\n      this.validateDeliveryDialog = false;\n      this.$refs.form.reset();\n    },\n\n    validateDeliverySubmit() {\n      if (this.validDelivery) {\n        this.$refs.form.reset();\n        this.validateDeliveryDialog = false;\n      }\n    }\n\n  },\n\n  mounted() {\n    axios.get('http://localhost:4300/api/v1/deliveries/deliveryman/' + this.delivery.deliveryManId).then(response => this.newDeliveryMan = response.data).catch(error => console.log(error));\n  }\n\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAyBA;AAEA;EACAA,iCADA;EAEAC;IACAC,YADA;IAEAC;EAFA,CAFA;EAMAC;IACAC,kBADA;IAEAC,oBAFA;IAGAC,6BAHA;IAIAC;EAJA,EANA;EAYAC;IACAC;MACA;QACAC;UAAAC;QAAA,GACAC,KADA,CACAC,2BADA;QAEAH;UAAAI;QAAA,GACAF,KADA,CACAC,2BADA;MAEA;;MACA;QACAH;UAAAK;QAAA,GACAH,KADA,CACAC,2BADA;MAEA;;MACA;QACAH;UAAAC;QAAA,GACAC,KADA,CACAC,2BADA;QAEAH;UAAAI;QAAA,GACAF,KADA,CACAC,2BADA;MAEA;;MAEAG;IACA,CApBA;;IAqBAC;MACA;MACA;IACA,CAxBA;;IAyBAC;MACA;QACA;QACA;MACA;IACA;;EA9BA,CAZA;;EA4CAC;IACAT,gGACAU,IADA,CACAC,+CADA,EAEAT,KAFA,CAEAC,2BAFA;EAGA;;AAhDA","names":["name","props","delivery","action","data","newDeliveryMan","validDelivery","validateDeliveryDialog","show1","methods","validateDelivery","axios","deliveryState","catch","error","orderState","deliveryManId","location","cancelButtonClick","validateDeliverySubmit","mounted","then","response"],"sourceRoot":"src/components/shop","sources":["ValidateDeliveryComponent.vue"],"sourcesContent":["<template>\n    <v-dialog v-model=\"validateDeliveryDialog\" max-width=\"600px\">\n      <template v-slot:activator=\"{ on, attrs }\">\n        <v-btn v-if=\"action === 'Accepter'\" v-bind=\"attrs\" v-on=\"on\" color=\"primary\">Accepter</v-btn>\n        <v-btn v-if=\"action === 'Refuser'\" v-bind=\"attrs\" v-on=\"on\" color=\"error\">Refuser</v-btn>\n        <v-btn v-if=\"action === 'Confirmer'\" v-bind=\"attrs\" v-on=\"on\" color=\"primary\">Confirmer la livraison</v-btn>\n      </template>\n      <v-card>\n        <v-card-title>\n          <span v-if=\"action === 'Accepter'\" class=\"text-h4\">Accepter la livraison</span>\n          <span v-if=\"action === 'Refuser'\" class=\"text-h4\">Refuser la livraison</span>\n          <span v-if=\"action === 'Confirmer'\" class=\"text-h4\">Confirmer la livraison</span>\n        </v-card-title>\n        <v-form ref=\"form\" v-model=\"validDelivery\" @submit.prevent=\"validateDeliverySubmit\">\n          <v-card-actions>\n            <v-spacer></v-spacer>\n            <v-btn @click=\"cancelButtonClick\">Fermer</v-btn>\n            <v-btn class=\"mr-4\" color=\"primary\" type=\"submit\" @click=\"validateDelivery\" :disabled=\"!validDelivery\">Enregistrer</v-btn>\n          </v-card-actions>\n        </v-form>\n      </v-card>\n    </v-dialog>\n</template>\n\n<script>\nimport axios from 'axios'\n\nexport default {\n  name: 'ValidateDeliveryComponent',\n  props: {\n    delivery: {},\n    action: String\n  },\n  data: () => ({\n    newDeliveryMan: {},\n    validDelivery: false,\n    validateDeliveryDialog: false,\n    show1: true\n  }),\n  methods: {\n    validateDelivery () {\n      if (this.action === 'Accepter') {\n        axios.patch('http://localhost:4300/api/v1/deliveries/' + this.delivery._id, { deliveryState: 'En cours de livraison' })\n          .catch(error => console.log(error))\n        axios.patch('http://localhost:4400/api/v1/orders/' + this.delivery.order._id, { orderState: 'En cours de livraison' })\n          .catch(error => console.log(error))\n      }\n      if (this.action === 'Refuser') {\n        axios.patch('http://localhost:4300/api/v1/deliveries/' + this.delivery._id, { deliveryManId: this.newDeliveryMan.id })\n          .catch(error => console.log(error))\n      }\n      if (this.action === 'Confirmer') {\n        axios.patch('http://localhost:4300/api/v1/deliveries/' + this.delivery._id, { deliveryState: 'Livrée' })\n          .catch(error => console.log(error))\n        axios.patch('http://localhost:4400/api/v1/orders/' + this.delivery.order._id, { orderState: 'Livrée' })\n          .catch(error => console.log(error))\n      }\n\n      location.reload()\n    },\n    cancelButtonClick () {\n      this.validateDeliveryDialog = false\n      this.$refs.form.reset()\n    },\n    validateDeliverySubmit () {\n      if (this.validDelivery) {\n        this.$refs.form.reset()\n        this.validateDeliveryDialog = false\n      }\n    }\n  },\n  mounted () {\n    axios.get('http://localhost:4300/api/v1/deliveries/deliveryman/' + this.delivery.deliveryManId)\n      .then(response => (this.newDeliveryMan = response.data))\n      .catch(error => console.log(error))\n  }\n}\n</script>\n"]},"metadata":{},"sourceType":"module"}