{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from 'axios';\nexport default {\n  name: 'ProductsComponent',\n  props: {\n    restaurant: Object,\n    products: Array,\n    category: String,\n    modif: Boolean\n  },\n  data: () => ({\n    model: [],\n    reveal: false,\n    validProduct: false,\n    rules: [v => !!v || 'Veuillez renseigner ce champs']\n  }),\n  methods: {\n    addToCart(item) {\n      this.$store.commit('addToCart', item);\n    },\n\n    removeFromCart(item) {\n      this.$store.commit('removeFromCart', item);\n    },\n\n    validateProduct(item) {\n      item.categories = item.categories.toString().split(',');\n      axios.patch('http://localhost:4500/api/v1/products/' + item._id, item).catch(error => console.log(error));\n    },\n\n    validateProductSubmit() {\n      if (this.validProduct) {\n        this.$refs.productForm.reset();\n      }\n    },\n\n    deleteProduct(item) {\n      axios.delete('http://localhost:4500/api/v1/products/' + item._id).catch(error => console.log(error));\n      location.reload();\n    }\n\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0GA;AAEA;EACAA,yBADA;EAEAC;IACAC,kBADA;IAEAC,eAFA;IAGAC,gBAHA;IAIAC;EAJA,CAFA;EAQAC;IACAC,SADA;IAEAC,aAFA;IAGAC,mBAHA;IAIAC,QACAC,2CADA;EAJA,EARA;EAgBAC;IACAC;MACA;IACA,CAHA;;IAIAC;MACA;IACA,CANA;;IAOAC;MACAC;MACAC,uEACAC,KADA,CACAC,2BADA;IAEA,CAXA;;IAYAC;MACA;QACA;MACA;IACA,CAhBA;;IAiBAC;MACAJ,kEACAC,KADA,CACAC,2BADA;MAEAG;IACA;;EArBA;AAhBA","names":["name","props","restaurant","products","category","modif","data","model","reveal","validProduct","rules","v","methods","addToCart","removeFromCart","validateProduct","item","axios","catch","error","validateProductSubmit","deleteProduct","location"],"sourceRoot":"src/components/shop","sources":["ProductsComponent.vue"],"sourcesContent":["<template>\n  <div id=\"products-component\">\n    <v-container>\n      <h3>{{ category }}</h3>\n      <v-row>\n        <v-col style=\"height: 410px;\">\n          <v-sheet class=\"mx-auto\" width=\"100%\">\n            <v-slide-group v-model=\"model\" class=\"pa-4\" multiple show-arrows>\n              <v-slide-item v-for=\"(product, idx) in products.filter(product => product.restaurantId === restaurant._id && product.categories.includes(category))\" :key=\"idx\" v-slot=\"{ active, toggle }\">\n                <v-card outlined class=\"mx-auto\" max-width=\"200\">\n                  <v-img :src=\"product.image\" height=\"175px\"/>\n                  <v-card-title>\n                    {{ product.name }}\n                  </v-card-title>\n                  <v-card-subtitle>{{ product.price }} €</v-card-subtitle>\n                  <v-card-actions>\n                    <v-btn text color=\"primary\" @click=\"toggle\">Découvrir</v-btn>\n                    <v-spacer></v-spacer>\n\n                    <v-btn v-if=\"modif\" icon class=\"mr-1\">\n                      <v-dialog max-width=\"50%\">\n                        <template v-slot:activator=\"{ on, attrs }\">\n                          <v-btn color=\"primary\" class=\"mx-2\" icon fab small v-bind=\"attrs\" v-on=\"on\">\n                            <v-icon>mdi-pencil</v-icon>\n                          </v-btn>\n                        </template>\n                        <template v-slot:default=\"dialog\">\n                          <v-card>\n                            <v-card-title>\n                              <span class=\"text-h4\">{{ product.name }}</span>\n                            </v-card-title>\n                            <v-form v-model=\"validProduct\" ref=\"productForm\" @submit=\"validateProductSubmit\" lazy-validation>\n                              <v-container>\n                                <v-row>\n                                  <v-col cols=\"12\" md=\"5\">\n                                    <v-text-field v-model=\"product.name\" label=\"Intitulé du produit\" :rules=\"rules\"/>\n                                  </v-col>\n                                  <v-col cols=\"12\" md=\"12\">\n                                    <v-textarea v-model=\"product.description\" label=\"Description du produit\"/>\n                                  </v-col>\n                                  <v-col cols=\"12\" md=\"4\">\n                                    <v-text-field v-model=\"product.price\" label=\"Prix du produit\" type=\"number\" :rules=\"rules\"/>\n                                  </v-col>\n                                  <v-col cols=\"12\" md=\"4\">\n                                    <v-text-field v-model=\"product.categories\" label=\"Categorie(s)\" :rules=\"rules\"/>\n                                  </v-col>\n                                  <v-col cols=\"8\" md=\"8\">\n                                    <v-text-field v-model=\"product.image\" label=\"URL de l'image\" :rules=\"rules\"/>\n                                  </v-col>\n                                  <v-col cols=\"8\" md=\"8\">\n                                    <v-checkbox v-model=\"product.isOutOfStock\" label=\"Rupture de stock ?\" required/>\n                                  </v-col>\n                                </v-row>\n                              </v-container>\n                              <v-card-actions>\n                                <v-spacer></v-spacer>\n                                <v-btn @click=\"dialog.value=false\">\n                                  Fermer\n                                </v-btn>\n                                <v-btn @click=\"deleteProduct(product); dialog.value=false\" color=\"error\">\n                                  <v-icon>mdi-delete</v-icon>\n                                  Supprimer\n                                </v-btn>\n                                <v-btn color=\"primary\" class=\"mr-4\" type=\"submit\" @click=\"validateProduct(product); dialog.value=false\" :disabled=\"!validProduct\">\n                                  Enregistrer\n                                </v-btn>\n                              </v-card-actions>\n                            </v-form>\n                          </v-card>\n                        </template>\n                      </v-dialog>\n                    </v-btn>\n\n                    <div v-if=\"!modif\" class=\"quantity-container\">\n                      <input v-model=\"product.quantity\" type=\"number\" class=\"quantity-input\" placeholder=\"0\" disabled/>\n                    </div>\n                    <v-spacer v-if=\"!modif\"></v-spacer>\n                    <div v-if=\"!modif\" class=\"actions-container\">\n                      <v-btn icon class=\"mr-1\" @click=\"addToCart(product)\">\n                        <v-icon color=\"primary\">mdi-plus-circle</v-icon>\n                      </v-btn>\n                      <v-btn icon class=\"mr-1\" @click=\"removeFromCart(product)\">\n                        <v-icon color=\"primary\">mdi-minus-circle</v-icon>\n                      </v-btn>\n                    </div>\n                  </v-card-actions>\n                  <v-expand-transition>\n                    <v-card v-if=\"active ? reveal=true : reveal=false\" class=\"transition-fast-in-fast-out v-card--reveal\" style=\"height: 100%;\">\n                      <v-card-title>{{ product.name }}</v-card-title>\n                      <v-card-subtitle v-if=\"product.description\" class=\"text-justify\">{{ product.description.slice(0, 142) + '...' }}</v-card-subtitle>\n                      <v-card-actions class=\"pt-0\">\n                        <v-btn text color=\"primary\" @click=\"toggle\">Fermer</v-btn>\n                      </v-card-actions>\n                    </v-card>\n                  </v-expand-transition>\n                </v-card>\n              </v-slide-item>\n            </v-slide-group>\n          </v-sheet>\n        </v-col>\n      </v-row>\n    </v-container>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\n\nexport default {\n  name: 'ProductsComponent',\n  props: {\n    restaurant: Object,\n    products: Array,\n    category: String,\n    modif: Boolean\n  },\n  data: () => ({\n    model: [],\n    reveal: false,\n    validProduct: false,\n    rules: [\n      v => !!v || 'Veuillez renseigner ce champs'\n    ]\n  }),\n  methods: {\n    addToCart (item) {\n      this.$store.commit('addToCart', item)\n    },\n    removeFromCart (item) {\n      this.$store.commit('removeFromCart', item)\n    },\n    validateProduct (item) {\n      item.categories = item.categories.toString().split(',')\n      axios.patch('http://localhost:4500/api/v1/products/' + item._id, item)\n        .catch(error => console.log(error))\n    },\n    validateProductSubmit () {\n      if (this.validProduct) {\n        this.$refs.productForm.reset()\n      }\n    },\n    deleteProduct (item) {\n      axios.delete('http://localhost:4500/api/v1/products/' + item._id)\n        .catch(error => console.log(error))\n      location.reload()\n    }\n  }\n}\n</script>\n\n<style scoped>\n#products-component .v-card--reveal {\n  position: absolute;\n  bottom: 0;\n  width: 100%;\n  opacity: 1 !important;\n}\n#products-component .quantity-container {\n  width: 30%;\n}\n#products-component .quantity-input {\n  width: 100%;\n  text-align: center;\n  padding: 5px 10px;\n  transform: translate(10px, -2px);\n  outline: none;\n}\n#products-component .quantity-input::-webkit-inner-spin-button, #products-component .quantity-input::-webkit-outer-spin-button {\n  -webkit-appearance: none;\n  margin: 0;\n}\n#products-component .quantity-input {\n  -moz-appearance: textfield;\n}\n#products-component .actions-container {\n  text-align: center;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}