{"ast":null,"code":"import \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.split.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.regexp.to-string.js\";\nimport \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.includes.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport ProductsComponent from '@/components/shop/ProductsComponent.vue';\nimport MenusComponent from '@/components/shop/MenusComponent.vue';\nimport axios from 'axios';\nimport $storeUser from '@/store/user';\nexport default {\n  name: 'MyRestaurantView',\n  components: {\n    ProductsComponent: ProductsComponent,\n    MenusComponent: MenusComponent\n  },\n  data: function data() {\n    return {\n      user: $storeUser.state.user,\n      restaurant: {},\n      restaurants: [],\n      products: [],\n      newProduct: {\n        name: '',\n        description: '',\n        price: null,\n        image: '',\n        categories: [],\n        isOutOfStock: false\n      },\n      menus: [],\n      newMenu: {\n        name: '',\n        description: '',\n        products: [],\n        price: null,\n        image: ''\n      },\n      categories: [],\n      dialogs: {\n        restaurantDialog: false,\n        productDialog: false,\n        menuDialog: false\n      },\n      validForm: {\n        restaurant: false,\n        newProduct: false,\n        newMenu: false\n      },\n      rules: [function (v) {\n        return !!v || 'Veuillez renseigner ce champs';\n      }]\n    };\n  },\n  methods: {\n    createRestaurant: function createRestaurant() {\n      var restaurant = {\n        name: this.restaurant.name,\n        description: this.restaurant.description,\n        image: this.restaurant.image,\n        categories: this.restaurant.categories.split(','),\n        restaurantOwnerId: this.user.id,\n        openingHours: this.restaurant.openingHours,\n        location: {\n          city: this.restaurant.city,\n          zipCode: this.restaurant.zipCode,\n          address: this.restaurant.address,\n          latitude: 0,\n          longitude: 0\n        }\n      };\n      axios.post('http://localhost:4200/api/v1/restaurants/', restaurant).catch(function (error) {\n        return console.log(error);\n      });\n    },\n    validateRestaurant: function validateRestaurant() {\n      this.restaurant.categories = this.restaurant.categories.toString().split(',');\n      axios.patch('http://localhost:4200/api/v1/restaurants/' + this.restaurant._id, this.restaurant).catch(function (error) {\n        return console.log(error);\n      });\n    },\n    validateRestaurantSubmit: function validateRestaurantSubmit() {\n      if (this.validForm.restaurant) {\n        this.$refs.restaurantForm.reset();\n        this.dialogs.restaurantDialog = false;\n      }\n    },\n    validateNewProduct: function validateNewProduct() {\n      var product = {\n        name: this.newProduct.name,\n        description: this.newProduct.description,\n        restaurantId: this.restaurant._id,\n        price: this.newProduct.price,\n        image: this.newProduct.image,\n        categories: this.newProduct.categories.split(','),\n        isOutOfStock: false\n      };\n      axios.post('http://localhost:4500/api/v1/products/', product).catch(function (error) {\n        return console.log(error);\n      });\n    },\n    validateNewProductSubmit: function validateNewProductSubmit() {\n      if (this.validForm.newProduct) {\n        this.$refs.newProductForm.reset();\n        this.dialogs.productDialog = false;\n      }\n    },\n    validateNewMenu: function validateNewMenu() {\n      var _this = this;\n\n      var products = [];\n\n      var _loop = function _loop(i) {\n        var product = _this.products.find(function (product) {\n          return product.name === _this.newMenu.products[i];\n        });\n\n        products.push(product._id);\n      };\n\n      for (var i = 0; i < this.newMenu.products.length; i++) {\n        _loop(i);\n      }\n\n      var menu = {\n        name: this.newMenu.name,\n        description: this.newMenu.description,\n        products: products,\n        restaurantId: this.restaurant._id,\n        price: this.newMenu.price,\n        image: this.newMenu.image\n      };\n      axios.post('http://localhost:4600/api/v1/menus/', menu).catch(function (error) {\n        return console.log(error);\n      });\n    },\n    validateNewMenuSubmit: function validateNewMenuSubmit() {\n      if (this.validForm.newMenu) {\n        this.$refs.newMenuForm.reset();\n        this.dialogs.restaurantDialog = false;\n      }\n    },\n    deleteRestaurant: function deleteRestaurant(item) {\n      axios.delete('http://localhost:4200/api/v1/restaurants/' + item._id).catch(function (error) {\n        return console.log(error);\n      });\n      location.reload();\n    }\n  },\n  computed: {\n    getAllCategories: function getAllCategories() {\n      var _this2 = this;\n\n      var categories = [];\n      var restaurantProducts = this.products.filter(function (product) {\n        return product.restaurantId === _this2.restaurant._id;\n      });\n\n      for (var i = 0; i < restaurantProducts.length; i++) {\n        var restaurantProductsCategory = restaurantProducts[i].categories;\n\n        for (var j = 0; j < restaurantProductsCategory.length; j++) {\n          if (!categories.includes(restaurantProductsCategory[j])) {\n            categories.push(restaurantProductsCategory[j]);\n          }\n        }\n      }\n\n      return categories;\n    },\n    getAllProducts: function getAllProducts() {\n      var _this3 = this;\n\n      var productsList = [];\n\n      for (var i = 0; i < this.products.filter(function (product) {\n        return product.restaurantId === _this3.restaurant._id;\n      }).length; i++) {\n        var productCategories = this.products[i].name;\n\n        if (!productsList.includes(productCategories)) {\n          productsList.push(productCategories);\n        }\n      }\n\n      return productsList;\n    }\n  },\n  mounted: function mounted() {\n    var _this4 = this;\n\n    axios.get('http://localhost:4200/api/v1/restaurants/byowner/' + this.user.id).then(function (response) {\n      return _this4.restaurant = response.data;\n    }).catch(function (error) {\n      return console.log(error);\n    });\n    axios.get('http://localhost:4200/api/v1/restaurants').then(function (response) {\n      return _this4.restaurants = response.data;\n    }).catch(function (error) {\n      return console.log(error);\n    });\n    axios.get('http://localhost:4500/api/v1/products/').then(function (response) {\n      return _this4.products = response.data;\n    }).catch(function (error) {\n      return console.log(error);\n    });\n    axios.get('http://localhost:4600/api/v1/menus/').then(function (response) {\n      return _this4.menus = response.data;\n    }).catch(function (error) {\n      return console.log(error);\n    });\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqOA;AACA;AACA;AACA;AAEA;EACAA,wBADA;EAEAC;IACAC,oCADA;IAEAC;EAFA,CAFA;EAMAC;IAAA;MACAC,2BADA;MAEAC,cAFA;MAGAC,eAHA;MAIAC,YAJA;MAKAC;QACAT,QADA;QAEAU,eAFA;QAGAC,WAHA;QAIAC,SAJA;QAKAC,cALA;QAMAC;MANA,CALA;MAaAC,SAbA;MAcAC;QACAhB,QADA;QAEAU,eAFA;QAGAF,YAHA;QAIAG,WAJA;QAKAC;MALA,CAdA;MAqBAC,cArBA;MAsBAI;QACAC,uBADA;QAEAC,oBAFA;QAGAC;MAHA,CAtBA;MA2BAC;QACAf,iBADA;QAEAG,iBAFA;QAGAO;MAHA,CA3BA;MAgCAM,QACA;QAAA;MAAA,CADA;IAhCA;EAAA,CANA;EA0CAC;IACAC,gBADA,8BACA;MACA;QACAxB,0BADA;QAEAU,wCAFA;QAGAE,4BAHA;QAIAC,iDAJA;QAKAY,+BALA;QAMAC,0CANA;QAOAC;UACAC,0BADA;UAEAC,gCAFA;UAGAC,gCAHA;UAIAC,WAJA;UAKAC;QALA;MAPA;MAgBAC,oEACAC,KADA,CACA;QAAA;MAAA,CADA;IAEA,CApBA;IAqBAC,kBArBA,gCAqBA;MACA;MACAF,gGACAC,KADA,CACA;QAAA;MAAA,CADA;IAEA,CAzBA;IA0BAE,wBA1BA,sCA0BA;MACA;QACA;QACA;MACA;IACA,CA/BA;IAgCAC,kBAhCA,gCAgCA;MACA;QACArC,0BADA;QAEAU,wCAFA;QAGA4B,iCAHA;QAIA3B,4BAJA;QAKAC,4BALA;QAMAC,iDANA;QAOAC;MAPA;MAUAmB,8DACAC,KADA,CACA;QAAA;MAAA,CADA;IAEA,CA7CA;IA8CAK,wBA9CA,sCA8CA;MACA;QACA;QACA;MACA;IACA,CAnDA;IAoDAC,eApDA,6BAoDA;MAAA;;MACA;;MADA,2BAEAC,CAFA;QAGA;UAAA;QAAA;;QACAjC;MAJA;;MAEA;QAAA;MAGA;;MAEA;QACAR,uBADA;QAEAU,qCAFA;QAGAF,kBAHA;QAIA8B,iCAJA;QAKA3B,yBALA;QAMAC;MANA;MASAqB,wDACAC,KADA,CACA;QAAA;MAAA,CADA;IAEA,CAtEA;IAuEAQ,qBAvEA,mCAuEA;MACA;QACA;QACA;MACA;IACA,CA5EA;IA6EAC,gBA7EA,4BA6EAC,IA7EA,EA6EA;MACAX,qEACAC,KADA,CACA;QAAA;MAAA,CADA;MAEAP;IACA;EAjFA,CA1CA;EA6HAkB;IACAC,gBADA,8BACA;MAAA;;MACA;MACA;QAAA;MAAA;;MACA;QACA;;QACA;UACA;YACAjC;UACA;QACA;MACA;;MACA;IACA,CAbA;IAcAkC,cAdA,4BAcA;MAAA;;MACA;;MACA;QAAA;MAAA;QACA;;QACA;UACAC;QACA;MACA;;MACA;IACA;EAvBA,CA7HA;EAsJAC,OAtJA,qBAsJA;IAAA;;IACAhB,8EACAiB,IADA,CACA;MAAA;IAAA,CADA,EAEAhB,KAFA,CAEA;MAAA;IAAA,CAFA;IAGAD,sDACAiB,IADA,CACA;MAAA;IAAA,CADA,EAEAhB,KAFA,CAEA;MAAA;IAAA,CAFA;IAGAD,oDACAiB,IADA,CACA;MAAA;IAAA,CADA,EAEAhB,KAFA,CAEA;MAAA;IAAA,CAFA;IAGAD,iDACAiB,IADA,CACA;MAAA;IAAA,CADA,EAEAhB,KAFA,CAEA;MAAA;IAAA,CAFA;EAGA;AAnKA","names":["name","components","ProductsComponent","MenusComponent","data","user","restaurant","restaurants","products","newProduct","description","price","image","categories","isOutOfStock","menus","newMenu","dialogs","restaurantDialog","productDialog","menuDialog","validForm","rules","methods","createRestaurant","restaurantOwnerId","openingHours","location","city","zipCode","address","latitude","longitude","axios","catch","validateRestaurant","validateRestaurantSubmit","validateNewProduct","restaurantId","validateNewProductSubmit","validateNewMenu","i","validateNewMenuSubmit","deleteRestaurant","item","computed","getAllCategories","getAllProducts","productsList","mounted","then"],"sourceRoot":"src/views/restaurantOwner","sources":["MyRestaurantView.vue"],"sourcesContent":["<template>\n  <v-container>\n    <v-row>\n      <v-col sm=\"12\" md=\"5\">\n        <h2>Mon restaurant\n          <v-dialog v-model=\"dialogs.restaurantDialog\" max-width=\"80%\">\n            <template v-slot:activator=\"{ on, attrs }\">\n              <v-btn v-if=\"restaurant.error\" color=\"primary\" class=\"mx-2\" fab small v-bind=\"attrs\" v-on=\"on\">\n                <v-icon>mdi-plus</v-icon>\n              </v-btn>\n              <v-btn v-else color=\"primary\" class=\"mx-2\" fab small v-bind=\"attrs\" v-on=\"on\">\n                <v-icon>mdi-pencil</v-icon>\n              </v-btn>\n            </template>\n            <v-card>\n              <v-card-title>\n                <span class=\"text-h4\">Gérer mon restaurant</span>\n              </v-card-title>\n              <v-form v-model=\"validForm.restaurant\" ref=\"restaurantForm\" @submit=\"validateRestaurantSubmit\">\n                <v-container>\n                  <v-card-title>\n                    <span class=\"text-h6\">Informations sur le restaurant</span>\n                  </v-card-title>\n                  <v-row>\n                    <v-col cols=\"8\" md=\"4\">\n                      <v-text-field v-model=\"restaurant.name\" label=\"Nom du restaurant\" :rules=\"rules\"/>\n                    </v-col>\n                    <v-col cols=\"8\" md=\"4\">\n                      <v-text-field v-model=\"restaurant.categories\" label=\"Catégorie(s)\" hint=\"Catégorie 1, Catégorie 2\" persistent-hint :rules=\"rules\"/>\n                    </v-col>\n                    <v-col cols=\"4\" md=\"4\">\n                      <v-text-field v-model=\"restaurant.openingHours\" label=\"Heures d'ouverture\" hint=\"Xh - Xh / Xh - Xh\" persistent-hint :rules=\"rules\"/>\n                    </v-col>\n                    <v-col cols=\"12\" md=\"12\">\n                      <v-textarea v-model=\"restaurant.description\" label=\"Description\"/>\n                    </v-col>\n                  </v-row>\n                  <v-row>\n                    <v-col cols=\"12\" md=\"5\">\n                      <v-text-field v-model=\"restaurant.image\" label=\"URL de l'image\" :rules=\"rules\"/>\n                    </v-col>\n                  </v-row>\n                  <v-card-title>\n                    <span class=\"text-h6 mt-5\">Localisation du restaurant</span>\n                  </v-card-title>\n                  <v-row v-if=\"restaurant.error\">\n                    <v-col cols=\"12\" md=\"4\">\n                      <v-text-field v-model=\"restaurant.city\" label=\"Ville\" :rules=\"rules\"/>\n                    </v-col>\n                    <v-col cols=\"12\" md=\"6\">\n                      <v-text-field v-model=\"restaurant.address\" label=\"Adresse\" :rules=\"rules\"/>\n                    </v-col>\n                    <v-col cols=\"4\" md=\"2\">\n                      <v-text-field v-model=\"restaurant.zipCode\" label=\"Code postal\" :rules=\"rules\"/>\n                    </v-col>\n                  </v-row>\n                  <v-row v-if=\"restaurant.location\">\n                    <v-col cols=\"12\" md=\"4\">\n                      <v-text-field v-model=\"restaurant.location.city\" label=\"Ville\" :rules=\"rules\"/>\n                    </v-col>\n                    <v-col cols=\"12\" md=\"6\">\n                      <v-text-field v-model=\"restaurant.location.address\" label=\"Adresse\" :rules=\"rules\"/>\n                    </v-col>\n                    <v-col cols=\"4\" md=\"2\">\n                      <v-text-field v-model=\"restaurant.location.zipCode\" label=\"Code postal\" :rules=\"rules\"/>\n                    </v-col>\n                  </v-row>\n                </v-container>\n                <v-card-actions>\n                  <v-spacer></v-spacer>\n                  <v-btn @click=\"dialogs.restaurantDialog=false\">Fermer</v-btn>\n                  <v-btn v-if=\"restaurant.error\" color=\"primary\" type=\"submit\" class=\"mr-4\" @click=\"createRestaurant\" :disabled=\"!validForm.restaurant\">Ajouter</v-btn>\n                  <v-btn v-else color=\"primary\" class=\"mr-4\" type=\"submit\" @click=\"validateRestaurant\" :disabled=\"!validForm.restaurant\">Enregistrer</v-btn>\n                </v-card-actions>\n              </v-form>\n            </v-card>\n          </v-dialog>\n        </h2>\n      </v-col>\n    </v-row>\n\n    <v-row v-if=\"restaurant.error\">\n      <h3 class=\"ml-3\">Veuillez entrer votre enseigne</h3>\n    </v-row>\n    <v-row v-else id=\"my-restaurant-view\">\n      <v-col sm=\"12\" md=\"4\">\n        <v-card elevation=\"2\" outlined class=\"restaurant-cards mb-5\">\n          <v-row>\n            <v-col cols=\"12\" md=\"12\">\n              <v-img :src=\"restaurant.image\" :alt=\"restaurant.name\" height=\"100%\" max-height=\"250px\"/>\n            </v-col>\n            <v-col cols=\"12\" md=\"12\">\n              <div class=\"restaurant-theme\">\n                <v-card-title>{{ restaurant.name }}</v-card-title>\n                <div class=\"categories\">\n                  <v-card-text v-for=\"category in restaurant.categories\" :key=\"category\">\n                    {{ category }}\n                  </v-card-text>\n                </div>\n              </div>\n              <v-card-subtitle class=\"text-justify\">{{ restaurant.description }}</v-card-subtitle>\n              <div class=\"restaurant-infos\" v-if=\"restaurant.location\">\n                <v-card-subtitle>{{ restaurant.location.city }} ({{ restaurant.location.zipCode }}), {{ restaurant.location.address }}</v-card-subtitle>\n                <div class=\"opening-hours\">\n                  <v-card-text>{{ restaurant.openingHours }}</v-card-text>\n                </div>\n              </div>\n            </v-col>\n          </v-row>\n          <v-card-actions>\n            <v-spacer></v-spacer>\n            <v-btn color=\"error\" @click=\"deleteRestaurant(restaurant)\">\n              Supprimer\n              <v-icon>mdi-delete</v-icon>\n            </v-btn>\n          </v-card-actions>\n        </v-card>\n      </v-col>\n\n      <v-col sm=\"12\" md=\"8\">\n        <v-row>\n          <v-col cols=\"12\" md=\"12\">\n            <h3>Mes produits\n              <v-dialog v-model=\"dialogs.productDialog\" max-width=\"50%\">\n                <template v-slot:activator=\"{ on, attrs }\">\n                  <v-btn color=\"primary\" class=\"mx-2\" fab small v-bind=\"attrs\" v-on=\"on\">\n                    <v-icon>mdi-plus</v-icon>\n                  </v-btn>\n                </template>\n                <v-card>\n                  <v-card-title>\n                    <span class=\"text-h4\">Ajouter un produit</span>\n                  </v-card-title>\n                  <v-form v-model=\"validForm.newProduct\" ref=\"newProductForm\" @submit=\"validateNewProductSubmit\">\n                    <v-container>\n                      <v-row>\n                        <v-col cols=\"12\" md=\"5\">\n                          <v-text-field v-model=\"newProduct.name\" label=\"Intitulé du produit\" :rules=\"rules\"/>\n                        </v-col>\n                        <v-col cols=\"12\" md=\"12\">\n                          <v-textarea v-model=\"newProduct.description\" label=\"Description du produit\"/>\n                        </v-col>\n                        <v-col cols=\"12\" md=\"4\">\n                          <v-text-field v-model=\"newProduct.price\" label=\"Prix du produit\" type=\"number\" :rules=\"rules\"/>\n                        </v-col>\n                        <v-col cols=\"12\" md=\"4\">\n                          <v-text-field v-model=\"newProduct.categories\" label=\"Categorie(s)\" hint=\"Catégorie 1, Catégorie 2\" persistent-hint :rules=\"rules\"/>\n                        </v-col>\n                        <v-col cols=\"8\" md=\"8\">\n                          <v-text-field v-model=\"newProduct.image\" label=\"URL de l'image\" :rules=\"rules\"/>\n                        </v-col>\n                        <v-col cols=\"8\" md=\"8\">\n                          <v-checkbox v-model=\"newProduct.isOutOfStock\" label=\"Rupture de stock ?\"/>\n                        </v-col>\n                      </v-row>\n                    </v-container>\n                    <v-card-actions>\n                      <v-spacer></v-spacer>\n                      <v-btn class=\"mr-4\" @click=\"dialogs.productDialog=false\">Fermer</v-btn>\n                      <v-btn color=\"primary\" class=\"mr-4\" type=\"submit\" @click=\"validateNewProduct\" :disabled=\"!validForm.newProduct\">Enregistrer</v-btn>\n                    </v-card-actions>\n                  </v-form>\n                </v-card>\n              </v-dialog>\n            </h3>\n          </v-col>\n          <v-col>\n            <v-row v-for=\"category in getAllCategories\" :key=\"category\">\n              <v-col cols=\"12\" md=\"12\">\n                <ProductsComponent :restaurant=\"restaurant\" :products=\"products\" :category=\"category\" :modif=\"true\"/>\n              </v-col>\n            </v-row>\n          </v-col>\n        </v-row>\n        <v-row>\n          <v-col cols=\"12\" md=\"12\">\n            <h3>Mes menus\n              <v-dialog v-if=\"true\" v-model=\"dialogs.menuDialog\" max-width=\"50%\">\n                <template v-slot:activator=\"{ on, attrs }\">\n                  <v-btn color=\"primary\" class=\"mx-2\" fab small v-bind=\"attrs\" v-on=\"on\">\n                    <v-icon>mdi-plus</v-icon>\n                  </v-btn>\n                </template>\n                <v-card>\n                  <v-card-title>\n                    <span class=\"text-h4\">Créer un menu</span>\n                  </v-card-title>\n                  <v-form v-model=\"validForm.newMenu\" ref=\"newMenuForm\" @submit=\"validateNewMenuSubmit\">\n                    <v-container>\n                      <v-row>\n                        <v-col cols=\"12\" md=\"5\">\n                          <v-text-field v-model=\"newMenu.name\" label=\"Intitulé du menu\" :rules=\"rules\"/>\n                        </v-col>\n                        <v-col cols=\"12\" md=\"12\">\n                          <v-textarea v-model=\"newMenu.description\" label=\"Description du menu\"/>\n                        </v-col>\n                        <v-col cols=\"12\" md=\"4\">\n                          <v-text-field v-model=\"newMenu.price\" label=\"Prix du menu\" type=\"number\" :rules=\"rules\"/>\n                        </v-col>\n                        <v-col cols=\"8\" md=\"8\">\n                          <v-text-field v-model=\"newMenu.image\" label=\"URL de l'image\" :rules=\"rules\"/>\n                        </v-col>\n                        <v-col cols=\"8\" md=\"4\">\n                          <v-select v-model=\"newMenu.products\" :items=\"getAllProducts\" label=\"Produits\" multiple/>\n                        </v-col>\n                      </v-row>\n                    </v-container>\n                    <v-card-actions>\n                      <v-spacer></v-spacer>\n                      <v-btn @click=\"dialogs.menuDialog=false\">Fermer</v-btn>\n                      <v-btn color=\"primary\" class=\"mr-4\" type=\"submit\" @click=\"validateNewMenu\" :disabled=\"!validForm.newMenu\">Enregistrer</v-btn>\n                    </v-card-actions>\n                  </v-form>\n                </v-card>\n              </v-dialog>\n            </h3>\n          </v-col>\n          <v-col>\n            <v-col cols=\"12\" md=\"12\">\n              <MenusComponent :restaurant=\"restaurant\" :menus=\"menus\" :modif=\"true\"/>\n            </v-col>\n          </v-col>\n        </v-row>\n      </v-col>\n    </v-row>\n  </v-container>\n</template>\n\n<script>\nimport ProductsComponent from '@/components/shop/ProductsComponent.vue'\nimport MenusComponent from '@/components/shop/MenusComponent.vue'\nimport axios from 'axios'\nimport $storeUser from '@/store/user'\n\nexport default {\n  name: 'MyRestaurantView',\n  components: {\n    ProductsComponent,\n    MenusComponent\n  },\n  data: () => ({\n    user: $storeUser.state.user,\n    restaurant: {},\n    restaurants: [],\n    products: [],\n    newProduct: {\n      name: '',\n      description: '',\n      price: null,\n      image: '',\n      categories: [],\n      isOutOfStock: false\n    },\n    menus: [],\n    newMenu: {\n      name: '',\n      description: '',\n      products: [],\n      price: null,\n      image: ''\n    },\n    categories: [],\n    dialogs: {\n      restaurantDialog: false,\n      productDialog: false,\n      menuDialog: false\n    },\n    validForm: {\n      restaurant: false,\n      newProduct: false,\n      newMenu: false\n    },\n    rules: [\n      v => !!v || 'Veuillez renseigner ce champs'\n    ]\n  }),\n  methods: {\n    createRestaurant () {\n      const restaurant = {\n        name: this.restaurant.name,\n        description: this.restaurant.description,\n        image: this.restaurant.image,\n        categories: this.restaurant.categories.split(','),\n        restaurantOwnerId: this.user.id,\n        openingHours: this.restaurant.openingHours,\n        location: {\n          city: this.restaurant.city,\n          zipCode: this.restaurant.zipCode,\n          address: this.restaurant.address,\n          latitude: 0,\n          longitude: 0\n        }\n      }\n\n      axios.post('http://localhost:4200/api/v1/restaurants/', restaurant)\n        .catch(error => console.log(error))\n    },\n    validateRestaurant () {\n      this.restaurant.categories = this.restaurant.categories.toString().split(',')\n      axios.patch('http://localhost:4200/api/v1/restaurants/' + this.restaurant._id, this.restaurant)\n        .catch(error => console.log(error))\n    },\n    validateRestaurantSubmit () {\n      if (this.validForm.restaurant) {\n        this.$refs.restaurantForm.reset()\n        this.dialogs.restaurantDialog = false\n      }\n    },\n    validateNewProduct () {\n      const product = {\n        name: this.newProduct.name,\n        description: this.newProduct.description,\n        restaurantId: this.restaurant._id,\n        price: this.newProduct.price,\n        image: this.newProduct.image,\n        categories: this.newProduct.categories.split(','),\n        isOutOfStock: false\n      }\n\n      axios.post('http://localhost:4500/api/v1/products/', product)\n        .catch(error => console.log(error))\n    },\n    validateNewProductSubmit () {\n      if (this.validForm.newProduct) {\n        this.$refs.newProductForm.reset()\n        this.dialogs.productDialog = false\n      }\n    },\n    validateNewMenu () {\n      const products = []\n      for (let i = 0; i < this.newMenu.products.length; i++) {\n        const product = this.products.find(product => product.name === this.newMenu.products[i])\n        products.push(product._id)\n      }\n\n      const menu = {\n        name: this.newMenu.name,\n        description: this.newMenu.description,\n        products: products,\n        restaurantId: this.restaurant._id,\n        price: this.newMenu.price,\n        image: this.newMenu.image\n      }\n\n      axios.post('http://localhost:4600/api/v1/menus/', menu)\n        .catch(error => console.log(error))\n    },\n    validateNewMenuSubmit () {\n      if (this.validForm.newMenu) {\n        this.$refs.newMenuForm.reset()\n        this.dialogs.restaurantDialog = false\n      }\n    },\n    deleteRestaurant (item) {\n      axios.delete('http://localhost:4200/api/v1/restaurants/' + item._id)\n        .catch(error => console.log(error))\n      location.reload()\n    }\n  },\n  computed: {\n    getAllCategories () {\n      const categories = []\n      const restaurantProducts = this.products.filter(product => product.restaurantId === this.restaurant._id)\n      for (let i = 0; i < restaurantProducts.length; i++) {\n        const restaurantProductsCategory = restaurantProducts[i].categories\n        for (let j = 0; j < restaurantProductsCategory.length; j++) {\n          if (!categories.includes(restaurantProductsCategory[j])) {\n            categories.push(restaurantProductsCategory[j])\n          }\n        }\n      }\n      return categories\n    },\n    getAllProducts () {\n      const productsList = []\n      for (let i = 0; i < this.products.filter(product => product.restaurantId === this.restaurant._id).length; i++) {\n        const productCategories = this.products[i].name\n        if (!productsList.includes(productCategories)) {\n          productsList.push(productCategories)\n        }\n      }\n      return productsList\n    }\n  },\n  mounted () {\n    axios.get('http://localhost:4200/api/v1/restaurants/byowner/' + this.user.id)\n      .then(response => (this.restaurant = response.data))\n      .catch(error => console.log(error))\n    axios.get('http://localhost:4200/api/v1/restaurants')\n      .then(response => (this.restaurants = response.data))\n      .catch(error => console.log(error))\n    axios.get('http://localhost:4500/api/v1/products/')\n      .then(response => (this.products = response.data))\n      .catch(error => console.log(error))\n    axios.get('http://localhost:4600/api/v1/menus/')\n      .then(response => (this.menus = response.data))\n      .catch(error => console.log(error))\n  }\n}\n</script>\n\n<style scoped>\n#my-restaurant-view .restaurant-cards {\n  max-width: 100%;\n}\n@media (max-width: 1264px) {\n  #my-restaurant-view .restaurant-cards {\n    max-width: 100%;\n    margin: auto;\n  }\n}\n#my-restaurant-view .restaurant-theme, #my-restaurant-view .restaurant-infos {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n#my-restaurant-view .restaurant-theme, #my-restaurant-view .restaurant-infos {\n  margin-right: 20px;\n}\n#my-restaurant-view .categories {\n  display: flex;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}